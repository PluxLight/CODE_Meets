<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	<mapper namespace="com.hypeboy.codemeets.model.dao.GroupDao">
	
	<resultMap type="GroupDto" id="group">
		<result column="group_pk" property="gpk" />
		<result column="group_name" property="gname" />
		<result column="group_desc" property="gdesc" />
		<result column="manager_id" property="mid" />
		<result column="group_url" property="gurl" />
	</resultMap>
	
	<resultMap type="GroupUserDto" id="guDto">
	<result column="group_pk" property="gpk" />
		<result column="user_pk" property="userPk" />
		<result column="user_id" property="userId" />
		<result column="user_name" property="userName"/>
	</resultMap>

	
	<insert id="createGroup" parameterType="GroupDto">
	<![CDATA[
		INSERT INTO
		 `s08p11d109`.`group`(group_name,group_desc,manager_id,group_url)
		VALUES
		  (#{gname}, #{gdesc}, #{mid},#{gurl});
		  ]]>
	</insert>
	
	<select id="groupMemberList" resultMap="guDto" parameterType="int">
		<![CDATA[
			select 
			user_id,user_name
			from 
			`group-user` 
			where group_pk=#{gpk};
		]]>
	</select>
	
	<insert id="groupJoin" >
	<![CDATA[
		insert into
		`group-user`(group_pk,user_pk,user_id,user_name)
		values
		(#{gpk},#{userPk},#{userId},#{userName});
		  ]]>
	</insert>
	
	</mapper>
	